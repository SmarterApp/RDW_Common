package org.opentestsystem.rdw.group;

import org.opentestsystem.rdw.security.PermissionScope;

import java.io.InputStream;
import java.util.List;
import java.util.Map;

/**
 * Implementations of this interface are responsible for validating
 * a CSV representation of a Student Group submission.
 */
public interface CsvValidationService {

    /**
     * Validate a student group and return the collection of validation results. These may be
     * failures and successes, be sure to check. Also populate file properties including
     * "newline" and "delimiter".
     *
     * @param is student group content
     * @param permissionScope permission scope for user validating content
     * @param fileProperties container for file properties
     * @return validation results
     */
    List<CsvValidationResult> validate(InputStream is, PermissionScope permissionScope, Map<String, String> fileProperties);

    /**
     * Convert a collection of CSV validation failures into a single
     * truncated message string.
     *
     * @param failures A collection of CSV validation failures
     * @return A string representation of the failure messages
     */
    String toFailureMessage(List<CsvValidationResult> failures);

    /**
     * Convert a collection of CSV validation successes into a single
     * truncated message string.
     *
     * @param successes A collection of CSV validation successes
     * @return A string representation of the success messages
     */
    String toSuccessMessage(List<CsvValidationResult> successes);
}
