package org.opentestsystem.rdw.common.model.subject;

import com.google.common.collect.ImmutableList;
import org.junit.Test;
import org.opentestsystem.rdw.common.model.ScoreType;

import static org.assertj.core.api.Assertions.assertThat;
import static org.opentestsystem.rdw.common.model.subject.XmlSubjectSerializationServiceTest.performanceLevel;

public class ScoringTest {

    @Test
    public void itShouldBuildOverallScoring() {
        final OverallScoring scoring = OverallScoring.builder()
                .minScore(1150d)
                .maxScore(1950d)
                .performanceLevels(PerformanceLevels.builder()
                        .performanceLevels(ImmutableList.of(performanceLevel(1), performanceLevel(2)))
                        .build())
                .build();
        assertThat(scoring).isInstanceOf(OverallScoring.class);
        assertThat(scoring.getScoreType()).isEqualTo(ScoreType.OVERALL);
        assertThat(scoring.getName()).isEqualTo("Overall");
        assertThat(scoring.getMinScore()).isEqualTo(1150d);
        assertThat(scoring.getMaxScore()).isEqualTo(1950d);
        assertThat(scoring.getPerformanceLevels().getPerformanceLevels()).hasSize(2);
    }

    @Test
    public void itShouldBuildClaimScoring() {
        final ClaimScoring scoring = ClaimScoring.builder()
                .performanceLevels(PerformanceLevels.builder()
                        .performanceLevels(ImmutableList.of(performanceLevel(1), performanceLevel(2)))
                        .build())
                .build();
        assertThat(scoring).isInstanceOf(ClaimScoring.class);
        assertThat(scoring.getScoreType()).isEqualTo(ScoreType.CLAIM);
        assertThat(scoring.getName()).isEqualTo("Claim");
        assertThat(scoring.getMinScore()).isNull();
        assertThat(scoring.getMaxScore()).isNull();
    }
}
