package org.opentestsystem.rdw.multitenant.task;

import org.springframework.security.oauth2.client.token.grant.password.ResourceOwnerPasswordResourceDetails;

import java.util.Optional;

public class TaskTenantUtil {

    public static ResourceOwnerPasswordResourceDetails tenantOverrideOauth2(ResourceOwnerPasswordResourceDetails tenantOauth2, ResourceOwnerPasswordResourceDetails rootOauth2) {
        ResourceOwnerPasswordResourceDetails oauth2 = new ResourceOwnerPasswordResourceDetails();
        oauth2.setAccessTokenUri(
                Optional.ofNullable(tenantOauth2.getAccessTokenUri())
                        .orElse(rootOauth2.getAccessTokenUri())
        );
        oauth2.setClientId(
                Optional.ofNullable(tenantOauth2.getClientId())
                        .orElse(rootOauth2.getClientId())
        );
        oauth2.setClientSecret(
                Optional.ofNullable(tenantOauth2.getClientSecret())
                        .orElse(rootOauth2.getClientSecret())
        );
        oauth2.setPassword(
                Optional.ofNullable(tenantOauth2.getPassword())
                        .orElse(rootOauth2.getPassword())
        );
        oauth2.setUsername(
                Optional.ofNullable(tenantOauth2.getUsername())
                        .orElse(rootOauth2.getUsername())
        );
        return oauth2;
    }

}
