package org.opentestsystem.rdw.script;

import java.util.Map;

import static com.google.common.collect.ImmutableMap.copyOf;
import static com.google.common.collect.ImmutableMap.of;

/**
 * Exception class for reporting all script compile errors in a pipeline.
 */
public class PipelineBuildException extends RuntimeException {
    private final PipelineDefinition source;
    private final Map<PipelineScriptDefinition, Exception> errors;

    public PipelineBuildException(final String message,
                                  final PipelineDefinition source,
                                  final Map<PipelineScriptDefinition, Exception> errors) {
        super(message);
        this.source = source;
        this.errors = errors != null ? copyOf(errors) : of();
    }

    public PipelineDefinition getSource() {
        return source;
    }

    public Map<PipelineScriptDefinition, Exception> getErrors() {
        return errors;
    }
}
