package org.opentestsystem.rdw.script.publishing;

import java.util.List;

/**
 * Repository responsible for managing published pipelines
 */
public interface PublishedPipelineRepository {

    /**
     * Finds all of the published pipelines matching the given pipeline code and version
     * The found pipelines will be returned without any script information.
     * A separate call to {@link #findByCodeAndVersion} must be made to get the pipeline scripts.
     *
     * @param code The pipeline code
     * @return All published pipelines for the given pipeline code without their scripts
     */
    List<PublishedPipeline> findAllByCode(String code);

    /**
     * Finds The published pipeline matching the given pipeline code and version
     *
     * @param code The pipeline code
     * @param version The pipeline version
     * @return The published pipeline for the given code and version; may be null if it doesn't exist
     */
    PublishedPipeline findByCodeAndVersion(String code, String version);

    /**
     * Creates a published pipeline artifact
     * This method sets the version and published fields of the provided published pipeline
     *
     * @param pipeline The pipeline to publish
     * @return The created pipeline with version and publish date filled in
     */
    PublishedPipeline create(PublishedPipeline pipeline);

}