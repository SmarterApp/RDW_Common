package org.opentestsystem.rdw.utils;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.support.PropertySourcesPlaceholderConfigurer;
import org.springframework.core.env.PropertySource;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringRunner;

import static org.assertj.core.api.Assertions.assertThat;

@RunWith(SpringRunner.class)
@ContextConfiguration(classes={YamlPropertiesConfigurator.class})
public class YamlPropertiesConfiguratorTest {

    @Autowired
    private PropertySourcesPlaceholderConfigurer propertyConfigurer;

    @Test
    public void contextTest() {
        final PropertySource<?> localProperties = propertyConfigurer.getAppliedPropertySources().get("localProperties");
        assertThat(localProperties.getProperty("widget.getWidget.sql")).isEqualTo("select * from widget where id=:id");
        assertThat(localProperties.getProperty("widget.getWidgets.sql")).isEqualTo("select * from widget");
        assertThat(localProperties.getProperty("widget.getClip.sql")).isEqualTo("select * from widget\n");
    }
}